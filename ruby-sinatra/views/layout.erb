<!DOCTYPE html>
<html>
<head>
  <title>WhoKnows</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="page">
  <div class="navigation">
    <nav>
      <h1><a id="nav-logo" href="/">WhoKnows</a></h1>
      <% if logged_in? %>
        <a id="nav-logout" href="#" onclick="logoutUser(); return false;">
          Log out [<%= current_user.username %>]
        </a>
      <% else %>
        <a id="nav-login" href="/login">Log in</a>
        <a id="nav-register" href="/register">Register</a>
      <% end %>
      <a href="/weather">Weather</a>
    </nav>
  </div>

  <div class="body">
    <%= yield %>
  </div>

  <div class="footer">
    <span>WhoKnows &copy; 2009</span>
  </div>
</div>

<script>
  function logoutUser() {
    fetch('/api/logout')
      .then(response => response.json())
      .then(data => {
        if (data.statusCode === 200) {
          window.location.href = '/';
        }
      });
  }
</script>
</body>
</html>